<!DOCTYPE html>
<html lang = "en">
<head>
  <meta charset = "UTF-8">
  <link rel = "stylesheet" href="style.css">
  <title> DNSpyr </title>
</head>
<body>
    <header>
      <h1>DNSSpyr</h1>
    </header>
    <div id="mainview" name="mainview">
      <form action="/add" method="POST">
        <fieldset>
          <h3>Add a new DNS Server</h3>
          <label for="dnsIP">Server IP Address</label>
          <input type="text" id='dnsIP' name="dnsIP">
          <br><br>
          <button type="reset">Reset</button>
          <button type="submit">Submit</button>
          <label>Clear DNS Server List</label>
          <input type="checkbox" id="clear" name="clear">
        </fieldset>
      </form>
      <form action="/lookup" method="POST">
          <fieldset>
            <h3>Simple DNS Lookup</h3>
            <label>Hostname</label>
            <input type="text" id="hostname" name="hostname" required>
            <br><br>
            <button type ="reset">Reset</button>
            <button type ="submit">Submit</button>
            <br><br><br>
            <p id="lookupResult" name="lookupResult"></p>
          </fieldset>
        </form>
        <form action="/adv_lookup" method="POST">
          <fieldset>
            <h3>Advanced DNS Lookup</h3>
            <label for="hostname">Hostname</label>
            <input type="text" id="hostname" name="hostname" required>
            <label for="recordType">Record Type</label>
            <select name="recordType" id="recordType">
              <option value="A" selected="selected">A</option>
              <option value="AAAA">AAAA</option>
              <option value="MX">MX</option>
              <option value="NS">NS</option>
              <option value="ANY">ANY</option>
            </select>
            <br><br>
            <button type="reset">Reset</button>
            <button type="submit">Submit</button>
            <br><br><br>
            <p name="resolveResult" id="resolveResult"></p>
          </fieldset>
        </form>
      </div>
      <footer>
        <hr>
        <h4>Please enter the IP address of a DNS server to perform targeted (advanced) lookups, DNSpyr will use the DNS server you specified if you have not specified a DNS server please use "Simple DNS Lookup"</h4>
      </footer>
    <script>
        fetch('/fetchLookupHistory')
        .then(response => response.json())
        .then(json => {
            var result = JSON.stringify(json);
            if (result == '[]'){
              document.getElementById('lookupResult').innerHTML = "";
            } else {
              document.getElementById('lookupResult').innerHTML = result;
            }
        });
    </script>
</body>
</html>

    